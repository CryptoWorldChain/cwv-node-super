webpackJsonp([2],{"9bBU":function(t,e,s){s("mClu");var r=s("FeBl").Object;t.exports=function(t,e,s){return r.defineProperty(t,e,s)}},C4MV:function(t,e,s){t.exports={default:s("9bBU"),__esModule:!0}},M06k:function(t,e,s){var r=s("RV6x");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);s("rjj0")("010dfa92",r,!0)},RV6x:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,"\n.new-account, .import-account {\n  display: block;\n  margin: 0 auto;\n}\n.account-inner h3 {\n  margin: 10px 0 30px 0;\n}\n.account-inner .el-row .el-col {\n  margin: 10px 0;\n}\n.upload-keystore {\n  width: 100%;\n}\n.upload-keystore .el-upload {\n    display: block;\n}\n",""])},Snac:function(t,e,s){var r=s("ZwP3");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);s("rjj0")("33f00107",r,!0)},ZwP3:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,"\n.text-error {\n  padding: 50px 0;\n  color: #f00;\n  font-size: 12px;\n  text-align: center;\n}\n",""])},bOdI:function(t,e,s){"use strict";e.__esModule=!0;var r,o=s("C4MV"),a=(r=o)&&r.__esModule?r:{default:r};e.default=function(t,e,s){return e in t?(0,a.default)(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}},dkmA:function(t,e,s){"use strict";var r=[{prop:"txHash",label:"交易哈希"},{prop:"blockHeight",label:"区块高度"},{prop:"age",label:"生成时间"},{prop:"from",label:"转出地址"},{prop:"to",label:"转入地址"},{prop:"status",label:"状态"}],o={props:{address:{required:!0,type:String}},data:function(){return{loading:null,columns:r,addressInfo:{},errmsg:""}},mounted:function(){this.init()},watch:{address:function(){this.init()}},computed:{transactions:function(){console.log("watch---addressinfo",this.addressInfo);var t=this,e=this.addressInfo,s=[];if(e.transactions){var r=e.transactions;s=r.map(function(e,s){var r=[];e.froms&&(r=e.froms.map(function(t,e){return t.address||""}));var o=[];return e.tos&&(o=e.tos.map(function(t,e){return t.address||""})),e.from=r.join(","),e.to=o.join(","),e.age=t.timeago().format(e.timeStamp),"null"==e.status&&(e.status=""),e})}return s}},methods:{init:function(){var t=this.address;this.initAddressInfo(t)},initAddressInfo:function(t){var e=this,s="";this.$route.query.address&&(s=this.$route.query.address),t&&(s=t),this.address=s,s&&(this.loading=this.$loading(),this.$http.post("/node/adr/pbgad.do",{address:s}).then(function(t){e.loading.close(),console.log("address --- info",t),1==t.retCode&&t.address?(e.addressInfo=t.address,e.errmsg=""):1!=t.retCode&&(e.$message.error("未能获取到账户详情"),e.errmsg="获取账户详情出错")}).catch(function(t){e.$message.error("获取账户错误"),e.errmsg="服务器请求出错",e.loading.close()}))}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.errmsg?t._e():s("el-table",{attrs:{data:t.transactions}},[t._l(t.columns,function(e){return["txHash"==e.prop?s("el-table-column",{key:e.prop,attrs:{label:e.label},scopedSlots:t._u([{key:"default",fn:function(e){return[s("router-link",{staticClass:"link",attrs:{to:{name:"TransactionInfo",query:{txHash:e.row.txHash}}}},[t._v(t._s(e.row.txHash))])]}}])}):s("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label}})]})],2),t._v(" "),s("div",{staticClass:"text-error"},[t._v(t._s(t.errmsg))])],1)},staticRenderFns:[]};var n=s("VU/8")(o,a,!1,function(t){s("Snac")},null,null);e.a=n.exports},mClu:function(t,e,s){var r=s("kM2E");r(r.S+r.F*!s("+E39"),"Object",{defineProperty:s("evD5").f})},yFEt:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("bOdI"),o=s.n(r),a=s("dkmA"),n=s("TIfe"),i=/^.{6,20}$/,d=[{prop:"txHash",label:"交易哈希"},{prop:"blockHeight",label:"区块高度"},{prop:"age",label:"生成时间"},{prop:"from",label:"转出地址"},{prop:"to",label:"转入地址"},{prop:"status",label:"状态"}],l={data:function(){var t;return t={address:"",addressMsg:"",addressErr:"",getAddressErr:"",addressInfo:{},addVisible:!1,inputAddress:""},o()(t,"addressErr",""),o()(t,"repeatpwd",""),o()(t,"repeatErr",""),o()(t,"loaded",!1),o()(t,"loading",null),o()(t,"columns",d),o()(t,"data",[]),o()(t,"action","/action"),o()(t,"keystoreVisible",!1),o()(t,"keystorePass",""),o()(t,"repeatKeystorePass",""),o()(t,"keystorePassErr",""),o()(t,"repeatKeystorePassErr",""),o()(t,"keyStoreJsonStr",""),t},components:{Transactions:a.a},mounted:function(){this.initAddress()},computed:{transactions:function(){console.log("watch---addressinfo",this.addressInfo);var t=this,e=this.addressInfo,s=[];if(e.transactions){var r=e.transactions;s=r.map(function(e,s){var r=e.froms?e.froms.map(function(t,e){if(t.address)return t.address}):[],o=e.tos?e.tos.map(function(t,e){if(t.address)return t.address}):[];return e.from=r.join(","),e.to=o.join(","),e.age=t.timeago().format(e.timeStamp),e})}return s},transaction_amount:function(){var t=this.addressInfo;return t.transactions&&t.transactions.length?t.transactions.length:0},tokens:function(){var t=[],e=this.addressInfo;return console.log(e),e.tokens&&"function"==typeof e.tokens.join&&(t=e.tokens),console.log("00000token",e,t),t}},methods:{initAddress:function(t){var e=this;console.log(n.g,this.setAddress),console.log("--000000000"),this.loading=this.$loading();var s=Object(n.a)();if(t&&(s=t),s)return this.address=s,this.loading.close(),this.initAddressInfo(s),!1;this.$http.post("/node/man/pbgna.do",{address:s}).then(function(t){e.loaded=!0,e.getAddressErr="",e.loading.close(),console.log("addressinfo",t),"1"==t.retCode&&(t.address?(Object(n.g)(t.address),e.initAddressInfo(t.address)):Object(n.d)())}).catch(function(t){e.$message.error("网络请求错误"),e.getAddressErr="获取账户详情出错",e.loading.close(),console.log("err get account",t)})},addAccount:function(){this.addVisible=!0},setAddress:function(){var t=this,e=this.inputAddress.trim(),s=this.repeatpwd.trim(),r="";if(r=e.match(i)?"":"请输入6～20位密码",this.addressErr=r,!r){if(e!==s)return this.repeatErr="两次密码输入不一致",!1;this.repeatErr="",this.loading=this.$loading(),this.$http.post("/node/man/pbcna.do",{pwd:e}).then(function(e){t.loading.close(),"1"==e.retCode?(t.$message.success("账户创建成功"),t.inputAddress="",t.addVisible=!1,t.initAddress()):e.retMsg&&t.$message.error(e.retMsg+",账户创建失败")}).catch(function(e){t.loading.close(),t.$message.error("账户创建失败")})}},route:function(t){t&&this.$router.push({path:t})},initAddressInfo:function(t){var e=this,s="";s=this.$route.query.address?this.$route.query.address:Object(n.a)(),t&&(s=t),this.address=s,s&&this.$http.post("/node/adr/pbgad.do",{address:s}).then(function(t){1==t.retCode?t&&t.address?(e.addressInfo=t.address,e.addressMsg=""):(e.addressMsg="节点启动中...",setTimeout(function(){e.initAddressInfo()},5e3)):e.addressErr="没有获取到节点详情"}).catch(function(t){e.addressErr="没有获取到节点详情"})},getAddressInfoLoop:function(){},beforeUpload:function(t){var e=this;if(console.log("-----upload---file----",t),"function"==typeof FileReader){var s=new FileReader;s.onload=function(t){t.target.result&&(e.keyStoreJsonStr=t.target.result,e.keystoreVisible=!0)},s.onerror=function(t){e.$message.error("文件读取错误，请稍后重试")},s.readAsText(t)}else this.$message.warning("请使用chrome,firefox等现代浏览器");return!1},importKeystore:function(){var t=this,e=this.keyStoreJsonStr.trim(),s=this.keystorePass.trim(),r=this.repeatKeystorePass.trim(),o="";if(o=s.match(i)?"":"请输入6～20位密码",this.keystorePassErr=o,!o){if(s!==r)return this.repeatKeystorePassErr="两次密码输入不一致",!1;this.repeatKeystorePassErr="",this.loading=this.$loading(),this.$http.post("/node/man/pbsna.do",{pwd:s,keyStoreJsonStr:e}).then(function(e){t.loading.close(),"1"==e.retCode?(t.$message.success("账户创建成功"),t.keystorePass="",t.repeatKeystorePass="",t.keystoreVisible=!1,t.initAddress()):e.retMsg?t.$message.error(e.retMsg+",账户创建失败"):t.$message.error("账户创建失败,请稍后重试")}).catch(function(e){t.loading.close(),t.$message.error("账户创建失败")})}},closeDialog:function(){this.inputAddress="",this.repeatpwd="",this.keystorePass="",this.repeatKeystorePass=""}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account"},[s("div",{staticClass:"account-inner"},[t.address&&!t.addressMsg?s("div",[s("h3",{staticClass:"title"},[t._v("账户详情")]),t._v(" "),s("el-button",{staticClass:"btn-block",staticStyle:{width:"20%","min-width":"100px"},attrs:{type:"primary"},on:{click:function(e){t.route("/import/export")}}},[t._v("\n        导出\n      ")]),t._v(" "),s("div",{staticStyle:{margin:"20px 0"}},[s("el-row",[s("el-col",{attrs:{span:4,xs:8}},[t._v("\n            账户余额：\n          ")]),t._v(" "),s("el-col",{attrs:{span:12}},[t._v("\n            "+t._s(t.addressInfo.balance)+"\n          ")])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:4,xs:8}},[t._v("\n            交易数量：\n          ")]),t._v(" "),s("el-col",{attrs:{span:12}},[t._v("\n            "+t._s(t.transaction_amount)+"\n          ")])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[t._v("\n            token:\n          ")]),t._v(" "),s("el-col",{attrs:{span:24}},[s("el-table",{attrs:{data:t.tokens}},[s("el-table-column",{attrs:{prop:"token",label:"token"}}),t._v(" "),s("el-table-column",{attrs:{prop:"balance",label:"余额"}}),t._v(" "),s("el-table-column",{attrs:{prop:"locked",label:"锁定"}})],1)],1)],1),t._v(" "),s("div",[s("div",{staticStyle:{margin:"20px 0",padding:"10px 0","border-bottom":"1px solid #eee"}},[t._v("交易：")]),t._v(" "),s("Transactions",{attrs:{address:t.address}})],1)],1)],1):t.addressMsg?s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.addressMsg,expression:"addressMsg"}],attrs:{"element-loading-text":"节点拼命启动中..."}},[s("div",{staticClass:"input-error",staticStyle:{padding:"50px 0"}},[t._v("\n        "+t._s(t.addressMsg)+"\n      ")])]):t.addressErr?s("div",[s("div",{staticClass:"input-error",staticStyle:{padding:"50px 0"}},[t._v("\n        "+t._s(t.addressErr)+"\n      ")])]):s("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}]},[s("h3",[t._v("您目前好像还没有账户")]),t._v(" "),s("el-row",{attrs:{gutter:30}},[s("el-col",{attrs:{span:8,xs:24}},[s("el-card",[s("el-button",{staticClass:"new-account",attrs:{size:"mini",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:t.addAccount}},[t._v("创建")])],1)],1),t._v(" "),s("el-col",{attrs:{span:8,xs:24}},[s("el-card",[s("el-button",{staticClass:"import-account",attrs:{size:"mini",type:"primary",icon:"el-icon-edit-outline"}},[s("router-link",{attrs:{to:{name:"ImportKeystore"}}},[t._v("导入keystore")])],1)],1)],1),t._v(" "),s("el-col",{attrs:{span:8,xs:24}},[s("el-card",[s("el-button",{staticClass:"import-account",attrs:{size:"mini",type:"primary",icon:"el-icon-edit-outline"},on:{click:function(e){t.route("/import/index")}}},[t._v("导入私钥")])],1)],1)],1)],1)]),t._v(" "),s("el-dialog",{attrs:{"modal-append-to-body":!1,title:"创建账户",visible:t.addVisible,center:""},on:{"update:visible":function(e){t.addVisible=e},close:t.closeDialog}},[s("div",[s("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请输入您的密码"},model:{value:t.inputAddress,callback:function(e){t.inputAddress=e},expression:"inputAddress"}}),t._v(" "),s("div",{staticClass:"input-error"},[t._v(t._s(t.addressErr))])],1),t._v(" "),s("div",[s("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请再次输入您的密码"},model:{value:t.repeatpwd,callback:function(e){t.repeatpwd=e},expression:"repeatpwd"}}),t._v(" "),s("div",{staticClass:"input-error"},[t._v(t._s(t.repeatErr))])],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"btn-block",attrs:{type:"primary"},on:{click:t.setAddress}},[t._v("确 定")])],1)]),t._v(" "),s("el-dialog",{attrs:{"modal-append-to-body":!1,title:"导入keystore",visible:t.keystoreVisible,center:""},on:{"update:visible":function(e){t.keystoreVisible=e},close:t.closeDialog}},[s("div",[s("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请输入您的密码"},model:{value:t.keystorePass,callback:function(e){t.keystorePass=e},expression:"keystorePass"}}),t._v(" "),s("div",{staticClass:"input-error"},[t._v(t._s(t.keystorePassErr))])],1),t._v(" "),s("div",[s("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请再次输入您的密码"},model:{value:t.repeatKeystorePass,callback:function(e){t.repeatKeystorePass=e},expression:"repeatKeystorePass"}}),t._v(" "),s("div",{staticClass:"input-error"},[t._v(t._s(t.repeatKeystorePassErr))])],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"btn-block",attrs:{type:"primary"},on:{click:t.importKeystore}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var p=s("VU/8")(l,c,!1,function(t){s("M06k")},null,null);e.default=p.exports}});