webpackJsonp([4],{MVd1:function(t,s,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.new-account, .import-account {\n  display: block;\n  margin: 0 auto;\n}\n.account-inner h3 {\n  margin: 10px 0 30px 0;\n}\n.account-inner .el-row .el-col {\n  margin: 10px 0;\n}\n.upload-keystore {\n  width: 100%;\n}\n.upload-keystore .el-upload {\n    display: block;\n}\n",""])},NK7p:function(t,s,e){var r=e("lO2+");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e("rjj0")("15e73548",r,!0)},"Q/xh":function(t,s,e){var r=e("MVd1");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e("rjj0")("5e860365",r,!0)},dkmA:function(t,s,e){"use strict";var r=[{prop:"txHash",label:"交易哈希"},{prop:"blockHeight",label:"区块高度"},{prop:"age",label:"生成时间"},{prop:"from",label:"转出地址"},{prop:"to",label:"转入地址"},{prop:"status",label:"状态"}],o={props:{address:{required:!0,type:String}},data:function(){return{loading:null,columns:r,addressInfo:{},errmsg:""}},mounted:function(){this.init()},watch:{address:function(){this.init()}},computed:{transactions:function(){console.log("watch---addressinfo",this.addressInfo);var t=this,s=this.addressInfo,e=[];if(s.transactions){var r=s.transactions;e=r.map(function(s,e){var r=s.froms.map(function(t,s){return t.address||""}),o=s.tos.map(function(t,s){return t.address||""});return s.from=r.join(","),s.to=o.join(","),s.age=t.timeago().format(s.timeStamp),"null"==s.status&&(s.status=""),s})}return e}},methods:{init:function(){var t=this.address;this.initAddressInfo(t)},initAddressInfo:function(t){var s=this,e="";this.$route.query.address&&(e=this.$route.query.address),t&&(e=t),this.address=e,e&&(this.loading=this.$loading(),this.$http.post("/node/adr/pbgad.do",{address:e}).then(function(t){s.loading.close(),console.log("address --- info",t),1==t.retCode&&t.address?(s.addressInfo=t.address,s.errmsg=""):1!=t.retCode&&(s.$message.error("获取账户详情错误"),s.errmsg="获取账户详情出错")}).catch(function(t){s.$message.error("获取账户错误"),s.errmsg="服务器请求出错",s.loading.close()}))}}},a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t.errmsg?t._e():e("el-table",{attrs:{data:t.transactions}},[t._l(t.columns,function(s){return["txHash"==s.prop?e("el-table-column",{key:s.prop,attrs:{label:s.label},scopedSlots:t._u([{key:"default",fn:function(s){return[e("router-link",{staticClass:"link",attrs:{to:{name:"TransactionInfo",query:{txHash:s.row.txHash}}}},[t._v(t._s(s.row.txHash))])]}}])}):e("el-table-column",{key:s.prop,attrs:{prop:s.prop,label:s.label}})]})],2),t._v(" "),e("div",{staticClass:"text-error"},[t._v(t._s(t.errmsg))])],1)},staticRenderFns:[]};var n=e("VU/8")(o,a,!1,function(t){e("NK7p")},null,null);s.a=n.exports},"lO2+":function(t,s,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.text-error {\n  padding: 50px 0;\n  color: #f00;\n  font-size: 12px;\n  text-align: center;\n}\n",""])},yFEt:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=e("dkmA"),o=e("TIfe"),a=/^.{6,20}$/,n=[{prop:"txHash",label:"交易哈希"},{prop:"blockHeight",label:"区块高度"},{prop:"age",label:"生成时间"},{prop:"from",label:"转出地址"},{prop:"to",label:"转入地址"},{prop:"status",label:"状态"}],i={data:function(){return{address:"",getAddressErr:"",addressInfo:{},addVisible:!1,inputAddress:"",addressErr:"",repeatpwd:"",repeatErr:"",loaded:!1,loading:null,columns:n,data:[],action:"/action",keystoreVisible:!1,keystorePass:"",repeatKeystorePass:"",keystorePassErr:"",repeatKeystorePassErr:"",keyStoreJsonStr:""}},components:{Transactions:r.a},mounted:function(){this.initAddress()},computed:{transactions:function(){console.log("watch---addressinfo",this.addressInfo);var t=this,s=this.addressInfo,e=[];if(s.transactions){var r=s.transactions;e=r.map(function(s,e){var r=s.froms.map(function(t,s){if(t.address)return t.address}),o=s.tos.map(function(t,s){if(t.address)return t.address});return s.from=r.join(","),s.to=o.join(","),s.age=t.timeago().format(s.timeStamp),s})}return e},transaction_amount:function(){var t=this.addressInfo;return t.transactions&&t.transactions.length?t.transactions.length:0}},methods:{initAddress:function(t){var s=this;this.loading=this.$loading();var e=Object(o.a)();if(t&&(e=t),e)return this.address=e,this.loading.close(),this.initAddressInfo(e),!1;this.$http.post("/node/man/pbgna.do",{address:e}).then(function(t){s.loaded=!0,s.getAddressErr="",s.loading.close(),console.log("addressinfo",t),"1"==t.retCode&&(t.address?(Object(o.f)(t.address),s.initAddressInfo(t.address)):Object(o.d)())}).catch(function(t){s.$message.error("网络请求错误"),s.getAddressErr="获取账户详情出错",s.loading.close(),console.log("err get account",t)})},addAccount:function(){this.addVisible=!0},setAddress:function(){var t=this,s=this.inputAddress.trim(),e=this.repeatpwd.trim(),r="";if(r=s.match(a)?"":"请输入6～20位密码",this.addressErr=r,!r){if(s!==e)return this.repeatErr="两次密码输入不一致",!1;this.repeatErr="",this.loading=this.$loading(),this.$http.post("/node/man/pbcna.do",{pwd:s}).then(function(s){t.loading.close(),"1"==s.retCode?(t.$message.success("账户创建成功"),t.inputAddress="",t.addVisible=!1,t.initAddress()):s.retMsg&&t.$message.error(s.retMsg+",账户创建失败")}).catch(function(s){t.loading.close(),t.$message.error("账户创建失败")})}},route:function(t){t&&this.$router.push({path:t})},initAddressInfo:function(t){var s=this;this.loading=this.$loading();var e="";e=this.$route.query.address?this.$route.query.address:Object(o.a)(),t&&(e=t),this.address=e,e&&this.$http.post("/node/adr/pbgad.do",{address:e}).then(function(t){s.loading.close(),1==t.retCode&&t.address?s.addressInfo=t.address:s.$message.error("获取账户详情错误")}).catch(function(t){s.loading.close()})},beforeUpload:function(t){var s=this;if(console.log("-----upload---file----",t),"function"==typeof FileReader){var e=new FileReader;e.onload=function(t){t.target.result&&(s.keyStoreJsonStr=t.target.result,s.keystoreVisible=!0)},e.onerror=function(t){s.$message.error("文件读取错误，请稍后重试")},e.readAsText(t)}else this.$message.warning("请使用chrome,firefox等现代浏览器");return!1},importKeystore:function(){var t=this,s=this.keyStoreJsonStr.trim(),e=this.keystorePass.trim(),r=this.repeatKeystorePass.trim(),o="";if(o=e.match(a)?"":"请输入6～20位密码",this.keystorePassErr=o,!o){if(e!==r)return this.repeatKeystorePassErr="两次密码输入不一致",!1;this.repeatKeystorePassErr="",this.loading=this.$loading(),this.$http.post("/node/man/pbsna.do",{pwd:e,keyStoreJsonStr:s}).then(function(s){t.loading.close(),"1"==s.retCode?(t.$message.success("账户创建成功"),t.keystorePass="",t.repeatKeystorePass="",t.keystoreVisible=!1,t.initAddress()):s.retMsg?t.$message.error(s.retMsg+",账户创建失败"):t.$message.error("账户创建失败,请稍后重试")}).catch(function(s){t.loading.close(),t.$message.error("账户创建失败")})}},closeDialog:function(){this.inputAddress="",this.repeatpwd="",this.keystorePass="",this.repeatKeystorePass=""}}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"account"},[e("div",{staticClass:"account-inner"},[t.address&&void 0!==t.addressInfo.balance?e("div",[e("h3",{staticClass:"title"},[t._v("账户详情")]),t._v(" "),e("el-button",{staticClass:"btn-block",staticStyle:{width:"20%","min-width":"100px"},attrs:{type:"primary"},on:{click:function(s){t.route("/import/export")}}},[t._v("\n        导出\n      ")]),t._v(" "),e("div",{staticStyle:{margin:"20px 0"}},[e("el-row",[e("el-col",{attrs:{span:4,xs:8}},[t._v("\n            账户余额：\n          ")]),t._v(" "),e("el-col",{attrs:{span:12}},[t._v("\n            "+t._s(t.addressInfo.balance)+"\n          ")])],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:4,xs:8}},[t._v("\n            交易数量：\n          ")]),t._v(" "),e("el-col",{attrs:{span:12}},[t._v("\n            "+t._s(t.transaction_amount)+"\n          ")])],1),t._v(" "),e("div",[e("div",{staticStyle:{margin:"20px 0",padding:"10px 0","border-bottom":"1px solid #eee"}},[t._v("交易：")]),t._v(" "),e("Transactions",{attrs:{address:t.address}})],1)],1)],1):t.address?e("div",[e("div",{staticClass:"input-error",staticStyle:{padding:"50px 0"}},[t._v("\n        获取账户详情失败,请重试\n      ")])]):e("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}]},[e("h3",[t._v("您目前好像还没有账户")]),t._v(" "),e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:8,xs:24}},[e("el-card",[e("el-button",{staticClass:"new-account",attrs:{size:"mini",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:t.addAccount}},[t._v("创建")])],1)],1),t._v(" "),e("el-col",{attrs:{span:8,xs:24}},[e("el-upload",{staticClass:"upload-keystore",attrs:{"before-upload":t.beforeUpload,action:t.action}},[e("el-card",[e("el-button",{staticClass:"import-account",attrs:{size:"mini",type:"primary",icon:"el-icon-edit-outline"}},[t._v("导入keystore")])],1)],1)],1),t._v(" "),e("el-col",{attrs:{span:8,xs:24}},[e("el-card",[e("el-button",{staticClass:"import-account",attrs:{size:"mini",type:"primary",icon:"el-icon-edit-outline"},on:{click:function(s){t.route("/import/index")}}},[t._v("导入私钥")])],1)],1)],1)],1)]),t._v(" "),e("el-dialog",{attrs:{"modal-append-to-body":!1,title:"创建账户",visible:t.addVisible,center:""},on:{"update:visible":function(s){t.addVisible=s},close:t.closeDialog}},[e("div",[e("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请输入您的密码"},model:{value:t.inputAddress,callback:function(s){t.inputAddress=s},expression:"inputAddress"}}),t._v(" "),e("div",{staticClass:"input-error"},[t._v(t._s(t.addressErr))])],1),t._v(" "),e("div",[e("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请再次输入您的密码"},model:{value:t.repeatpwd,callback:function(s){t.repeatpwd=s},expression:"repeatpwd"}}),t._v(" "),e("div",{staticClass:"input-error"},[t._v(t._s(t.repeatErr))])],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"btn-block",attrs:{type:"primary"},on:{click:t.setAddress}},[t._v("确 定")])],1)]),t._v(" "),e("el-dialog",{attrs:{"modal-append-to-body":!1,title:"导入keystore",visible:t.keystoreVisible,center:""},on:{"update:visible":function(s){t.keystoreVisible=s},close:t.closeDialog}},[e("div",[e("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请输入您的密码"},model:{value:t.keystorePass,callback:function(s){t.keystorePass=s},expression:"keystorePass"}}),t._v(" "),e("div",{staticClass:"input-error"},[t._v(t._s(t.keystorePassErr))])],1),t._v(" "),e("div",[e("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请再次输入您的密码"},model:{value:t.repeatKeystorePass,callback:function(s){t.repeatKeystorePass=s},expression:"repeatKeystorePass"}}),t._v(" "),e("div",{staticClass:"input-error"},[t._v(t._s(t.repeatKeystorePassErr))])],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"btn-block",attrs:{type:"primary"},on:{click:t.importKeystore}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var l=e("VU/8")(i,d,!1,function(t){e("Q/xh")},null,null);s.default=l.exports}});