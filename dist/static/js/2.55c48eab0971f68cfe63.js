webpackJsonp([2],{"9bBU":function(e,s,t){t("mClu");var r=t("FeBl").Object;e.exports=function(e,s,t){return r.defineProperty(e,s,t)}},C4MV:function(e,s,t){e.exports={default:t("9bBU"),__esModule:!0}},GX0S:function(e,s,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n.new-account, .import-account {\n  display: block;\n  margin: 0 auto;\n}\n.account-inner h3 {\n  margin: 10px 0 30px 0;\n}\n.account-inner .el-row .el-col {\n  margin: 10px 0;\n}\n.upload-keystore {\n  width: 100%;\n}\n.upload-keystore .el-upload {\n    display: block;\n}\n",""])},Snac:function(e,s,t){var r=t("ZwP3");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("rjj0")("33f00107",r,!0)},ZwP3:function(e,s,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n.text-error {\n  padding: 50px 0;\n  color: #f00;\n  font-size: 12px;\n  text-align: center;\n}\n",""])},bOdI:function(e,s,t){"use strict";s.__esModule=!0;var r,o=t("C4MV"),a=(r=o)&&r.__esModule?r:{default:r};s.default=function(e,s,t){return s in e?(0,a.default)(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}},dkmA:function(e,s,t){"use strict";var r=[{prop:"txHash",label:"交易哈希"},{prop:"blockHeight",label:"区块高度"},{prop:"age",label:"生成时间"},{prop:"from",label:"转出地址"},{prop:"to",label:"转入地址"},{prop:"status",label:"状态"}],o={props:{address:{required:!0,type:String}},data:function(){return{loading:null,columns:r,addressInfo:{},errmsg:""}},mounted:function(){this.init()},watch:{address:function(){this.init()}},computed:{transactions:function(){console.log("watch---addressinfo",this.addressInfo);var e=this,s=this.addressInfo,t=[];if(s.transactions){var r=s.transactions;t=r.map(function(s,t){var r=[];s.froms&&(r=s.froms.map(function(e,s){return e.address||""}));var o=[];return s.tos&&(o=s.tos.map(function(e,s){return e.address||""})),s.from=r.join(","),s.to=o.join(","),s.age=e.timeago().format(s.timeStamp),"null"==s.status&&(s.status=""),s})}return t}},methods:{init:function(){var e=this.address;this.initAddressInfo(e)},initAddressInfo:function(e){var s=this,t="";this.$route.query.address&&(t=this.$route.query.address),e&&(t=e),this.address=t,t&&(this.loading=this.$loading(),this.$http.post("/node/adr/pbgad.do",{address:t}).then(function(e){s.loading.close(),console.log("address --- info",e),1==e.retCode&&e.address?(s.addressInfo=e.address,s.errmsg=""):1!=e.retCode&&(s.$message.error("未能获取到账户详情"),s.errmsg="获取账户详情出错")}).catch(function(e){s.$message.error("获取账户错误"),s.errmsg="服务器请求出错",s.loading.close()}))}}},a={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[e.errmsg?e._e():t("el-table",{attrs:{data:e.transactions}},[e._l(e.columns,function(s){return["txHash"==s.prop?t("el-table-column",{key:s.prop,attrs:{label:s.label},scopedSlots:e._u([{key:"default",fn:function(s){return[t("router-link",{staticClass:"link",attrs:{to:{name:"TransactionInfo",query:{txHash:s.row.txHash}}}},[e._v(e._s(s.row.txHash))])]}}])}):t("el-table-column",{key:s.prop,attrs:{prop:s.prop,label:s.label}})]})],2),e._v(" "),t("div",{staticClass:"text-error"},[e._v(e._s(e.errmsg))])],1)},staticRenderFns:[]};var n=t("VU/8")(o,a,!1,function(e){t("Snac")},null,null);s.a=n.exports},jPkI:function(e,s,t){var r=t("GX0S");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("rjj0")("ce131e48",r,!0)},mClu:function(e,s,t){var r=t("kM2E");r(r.S+r.F*!t("+E39"),"Object",{defineProperty:t("evD5").f})},yFEt:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t("bOdI"),o=t.n(r),a=t("dkmA"),n=t("TIfe"),i=/^.{6,20}$/,d=[{prop:"txHash",label:"交易哈希"},{prop:"blockHeight",label:"区块高度"},{prop:"age",label:"生成时间"},{prop:"from",label:"转出地址"},{prop:"to",label:"转入地址"},{prop:"status",label:"状态"}],l={data:function(){var e;return e={address:"",addressMsg:"",addressErr:"",getAddressErr:"",addressInfo:{},addVisible:!1,inputAddress:""},o()(e,"addressErr",""),o()(e,"repeatpwd",""),o()(e,"repeatErr",""),o()(e,"loaded",!1),o()(e,"loading",null),o()(e,"columns",d),o()(e,"data",[]),o()(e,"action","/action"),o()(e,"keystoreVisible",!1),o()(e,"keystorePass",""),o()(e,"repeatKeystorePass",""),o()(e,"keystorePassErr",""),o()(e,"repeatKeystorePassErr",""),o()(e,"keyStoreJsonStr",""),e},components:{Transactions:a.a},mounted:function(){this.initAddress()},computed:{transactions:function(){console.log("watch---addressinfo",this.addressInfo);var e=this,s=this.addressInfo,t=[];if(s.transactions){var r=s.transactions;t=r.map(function(s,t){var r=s.froms?s.froms.map(function(e,s){if(e.address)return e.address}):[],o=s.tos?s.tos.map(function(e,s){if(e.address)return e.address}):[];return s.from=r.join(","),s.to=o.join(","),s.age=e.timeago().format(s.timeStamp),s})}return t},transaction_amount:function(){var e=this.addressInfo;return e.transactions&&e.transactions.length?e.transactions.length:0}},methods:{initAddress:function(e){var s=this;console.log(n.g,this.setAddress),console.log("--000000000"),this.loading=this.$loading();var t=Object(n.a)();if(e&&(t=e),t)return this.address=t,this.loading.close(),this.initAddressInfo(t),!1;this.$http.post("/node/man/pbgna.do",{address:t}).then(function(e){s.loaded=!0,s.getAddressErr="",s.loading.close(),console.log("addressinfo",e),"1"==e.retCode&&(e.address?(Object(n.g)(e.address),s.initAddressInfo(e.address)):Object(n.d)())}).catch(function(e){s.$message.error("网络请求错误"),s.getAddressErr="获取账户详情出错",s.loading.close(),console.log("err get account",e)})},addAccount:function(){this.addVisible=!0},setAddress:function(){var e=this,s=this.inputAddress.trim(),t=this.repeatpwd.trim(),r="";if(r=s.match(i)?"":"请输入6～20位密码",this.addressErr=r,!r){if(s!==t)return this.repeatErr="两次密码输入不一致",!1;this.repeatErr="",this.loading=this.$loading(),this.$http.post("/node/man/pbcna.do",{pwd:s}).then(function(s){e.loading.close(),"1"==s.retCode?(e.$message.success("账户创建成功"),e.inputAddress="",e.addVisible=!1,e.initAddress()):s.retMsg&&e.$message.error(s.retMsg+",账户创建失败")}).catch(function(s){e.loading.close(),e.$message.error("账户创建失败")})}},route:function(e){e&&this.$router.push({path:e})},initAddressInfo:function(e){var s=this,t="";t=this.$route.query.address?this.$route.query.address:Object(n.a)(),e&&(t=e),this.address=t,t&&this.$http.post("/node/adr/pbgad.do",{address:t}).then(function(e){1==e.retCode?e&&e.address?(s.addressInfo=e.address,s.addressMsg=""):(s.addressMsg="节点启动中...",setTimeout(function(){s.initAddressInfo()},5e3)):s.addressErr="没有获取到节点详情"}).catch(function(e){s.addressErr="没有获取到节点详情"})},getAddressInfoLoop:function(){},beforeUpload:function(e){var s=this;if(console.log("-----upload---file----",e),"function"==typeof FileReader){var t=new FileReader;t.onload=function(e){e.target.result&&(s.keyStoreJsonStr=e.target.result,s.keystoreVisible=!0)},t.onerror=function(e){s.$message.error("文件读取错误，请稍后重试")},t.readAsText(e)}else this.$message.warning("请使用chrome,firefox等现代浏览器");return!1},importKeystore:function(){var e=this,s=this.keyStoreJsonStr.trim(),t=this.keystorePass.trim(),r=this.repeatKeystorePass.trim(),o="";if(o=t.match(i)?"":"请输入6～20位密码",this.keystorePassErr=o,!o){if(t!==r)return this.repeatKeystorePassErr="两次密码输入不一致",!1;this.repeatKeystorePassErr="",this.loading=this.$loading(),this.$http.post("/node/man/pbsna.do",{pwd:t,keyStoreJsonStr:s}).then(function(s){e.loading.close(),"1"==s.retCode?(e.$message.success("账户创建成功"),e.keystorePass="",e.repeatKeystorePass="",e.keystoreVisible=!1,e.initAddress()):s.retMsg?e.$message.error(s.retMsg+",账户创建失败"):e.$message.error("账户创建失败,请稍后重试")}).catch(function(s){e.loading.close(),e.$message.error("账户创建失败")})}},closeDialog:function(){this.inputAddress="",this.repeatpwd="",this.keystorePass="",this.repeatKeystorePass=""}}},c={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"account"},[t("div",{staticClass:"account-inner"},[e.address&&!e.addressMsg?t("div",[t("h3",{staticClass:"title"},[e._v("账户详情")]),e._v(" "),t("el-button",{staticClass:"btn-block",staticStyle:{width:"20%","min-width":"100px"},attrs:{type:"primary"},on:{click:function(s){e.route("/import/export")}}},[e._v("\n        导出\n      ")]),e._v(" "),t("div",{staticStyle:{margin:"20px 0"}},[t("el-row",[t("el-col",{attrs:{span:4,xs:8}},[e._v("\n            账户余额：\n          ")]),e._v(" "),t("el-col",{attrs:{span:12}},[e._v("\n            "+e._s(e.addressInfo.balance)+"\n          ")])],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:4,xs:8}},[e._v("\n            交易数量：\n          ")]),e._v(" "),t("el-col",{attrs:{span:12}},[e._v("\n            "+e._s(e.transaction_amount)+"\n          ")])],1),e._v(" "),t("div",[t("div",{staticStyle:{margin:"20px 0",padding:"10px 0","border-bottom":"1px solid #eee"}},[e._v("交易：")]),e._v(" "),t("Transactions",{attrs:{address:e.address}})],1)],1)],1):e.addressMsg?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.addressMsg,expression:"addressMsg"}],attrs:{"element-loading-text":"节点拼命启动中..."}},[t("div",{staticClass:"input-error",staticStyle:{padding:"50px 0"}},[e._v("\n        "+e._s(e.addressMsg)+"\n      ")])]):e.addressErr?t("div",[t("div",{staticClass:"input-error",staticStyle:{padding:"50px 0"}},[e._v("\n        "+e._s(e.addressErr)+"\n      ")])]):t("div",{directives:[{name:"show",rawName:"v-show",value:e.loaded,expression:"loaded"}]},[t("h3",[e._v("您目前好像还没有账户")]),e._v(" "),t("el-row",{attrs:{gutter:30}},[t("el-col",{attrs:{span:8,xs:24}},[t("el-card",[t("el-button",{staticClass:"new-account",attrs:{size:"mini",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.addAccount}},[e._v("创建")])],1)],1),e._v(" "),t("el-col",{attrs:{span:8,xs:24}},[t("el-card",[t("el-button",{staticClass:"import-account",attrs:{size:"mini",type:"primary",icon:"el-icon-edit-outline"}},[t("router-link",{attrs:{to:{name:"ImportKeystore"}}},[e._v("导入keystore")])],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:8,xs:24}},[t("el-card",[t("el-button",{staticClass:"import-account",attrs:{size:"mini",type:"primary",icon:"el-icon-edit-outline"},on:{click:function(s){e.route("/import/index")}}},[e._v("导入私钥")])],1)],1)],1)],1)]),e._v(" "),t("el-dialog",{attrs:{"modal-append-to-body":!1,title:"创建账户",visible:e.addVisible,center:""},on:{"update:visible":function(s){e.addVisible=s},close:e.closeDialog}},[t("div",[t("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请输入您的密码"},model:{value:e.inputAddress,callback:function(s){e.inputAddress=s},expression:"inputAddress"}}),e._v(" "),t("div",{staticClass:"input-error"},[e._v(e._s(e.addressErr))])],1),e._v(" "),t("div",[t("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请再次输入您的密码"},model:{value:e.repeatpwd,callback:function(s){e.repeatpwd=s},expression:"repeatpwd"}}),e._v(" "),t("div",{staticClass:"input-error"},[e._v(e._s(e.repeatErr))])],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"btn-block",attrs:{type:"primary"},on:{click:e.setAddress}},[e._v("确 定")])],1)]),e._v(" "),t("el-dialog",{attrs:{"modal-append-to-body":!1,title:"导入keystore",visible:e.keystoreVisible,center:""},on:{"update:visible":function(s){e.keystoreVisible=s},close:e.closeDialog}},[t("div",[t("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请输入您的密码"},model:{value:e.keystorePass,callback:function(s){e.keystorePass=s},expression:"keystorePass"}}),e._v(" "),t("div",{staticClass:"input-error"},[e._v(e._s(e.keystorePassErr))])],1),e._v(" "),t("div",[t("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请再次输入您的密码"},model:{value:e.repeatKeystorePass,callback:function(s){e.repeatKeystorePass=s},expression:"repeatKeystorePass"}}),e._v(" "),t("div",{staticClass:"input-error"},[e._v(e._s(e.repeatKeystorePassErr))])],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"btn-block",attrs:{type:"primary"},on:{click:e.importKeystore}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var p=t("VU/8")(l,c,!1,function(e){t("jPkI")},null,null);s.default=p.exports}});