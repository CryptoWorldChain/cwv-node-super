webpackJsonp([1],{"9bBU":function(e,t,s){s("mClu");var r=s("FeBl").Object;e.exports=function(e,t,s){return r.defineProperty(e,t,s)}},C4MV:function(e,t,s){e.exports={default:s("9bBU"),__esModule:!0}},JBpR:function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,"\n.new-account, .import-account {\n  display: block;\n  margin: 0 auto;\n}\n.account-inner h3 {\n  margin: 10px 0 30px 0;\n}\n.account-inner .el-row .el-col {\n  margin: 10px 0;\n}\n.upload-keystore {\n  width: 100%;\n}\n.upload-keystore .el-upload {\n    display: block;\n}\n",""])},OmXE:function(e,t,s){var r=s("keNX");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);s("rjj0")("1ec60382",r,!0)},bOdI:function(e,t,s){"use strict";t.__esModule=!0;var r,o=s("C4MV"),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e,t,s){return t in e?(0,a.default)(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}},dkmA:function(e,t,s){"use strict";var r=[{prop:"txHash",label:"交易哈希"},{prop:"blockHeight",label:"区块高度"},{prop:"age",label:"生成时间"},{prop:"from",label:"转出地址"},{prop:"to",label:"转入地址"},{prop:"status",label:"状态"}],o={props:{address:{required:!0,type:String}},data:function(){return{loading:null,columns:r,addressInfo:{},errmsg:""}},mounted:function(){this.init()},watch:{address:function(){this.init()}},computed:{transactions:function(){console.log("watch---addressinfo",this.addressInfo);var e=this,t=this.addressInfo,s=[];if(t.transactions){var r=t.transactions;s=r.map(function(t,s){var r=t.froms.map(function(e,t){return e.address||""}),o=t.tos.map(function(e,t){return e.address||""});return t.from=r.join(","),t.to=o.join(","),t.age=e.timeago().format(t.timeStamp),"null"==t.status&&(t.status=""),t})}return s}},methods:{init:function(){var e=this.address;this.initAddressInfo(e)},initAddressInfo:function(e){var t=this,s="";this.$route.query.address&&(s=this.$route.query.address),e&&(s=e),this.address=s,s&&(this.loading=this.$loading(),this.$http.post("/node/adr/pbgad.do",{address:s}).then(function(e){t.loading.close(),console.log("address --- info",e),1==e.retCode&&e.address?(t.addressInfo=e.address,t.errmsg=""):1!=e.retCode&&(t.$message.error("未能获取到账户详情"),t.errmsg="获取账户详情出错")}).catch(function(e){t.$message.error("获取账户错误"),t.errmsg="服务器请求出错",t.loading.close()}))}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.errmsg?e._e():s("el-table",{attrs:{data:e.transactions}},[e._l(e.columns,function(t){return["txHash"==t.prop?s("el-table-column",{key:t.prop,attrs:{label:t.label},scopedSlots:e._u([{key:"default",fn:function(t){return[s("router-link",{staticClass:"link",attrs:{to:{name:"TransactionInfo",query:{txHash:t.row.txHash}}}},[e._v(e._s(t.row.txHash))])]}}])}):s("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label}})]})],2),e._v(" "),s("div",{staticClass:"text-error"},[e._v(e._s(e.errmsg))])],1)},staticRenderFns:[]};var n=s("VU/8")(o,a,!1,function(e){s("OmXE")},null,null);t.a=n.exports},keNX:function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,"\n.text-error {\n  padding: 50px 0;\n  color: #f00;\n  font-size: 12px;\n  text-align: center;\n}\n",""])},mClu:function(e,t,s){var r=s("kM2E");r(r.S+r.F*!s("+E39"),"Object",{defineProperty:s("evD5").f})},qFPy:function(e,t,s){var r=s("JBpR");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);s("rjj0")("202bf215",r,!0)},yFEt:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("bOdI"),o=s.n(r),a=s("dkmA"),n=s("TIfe"),i=/^.{6,20}$/,d=[{prop:"txHash",label:"交易哈希"},{prop:"blockHeight",label:"区块高度"},{prop:"age",label:"生成时间"},{prop:"from",label:"转出地址"},{prop:"to",label:"转入地址"},{prop:"status",label:"状态"}],l={data:function(){var e;return e={address:"",addressMsg:"",addressErr:"",getAddressErr:"",addressInfo:{},addVisible:!1,inputAddress:""},o()(e,"addressErr",""),o()(e,"repeatpwd",""),o()(e,"repeatErr",""),o()(e,"loaded",!1),o()(e,"loading",null),o()(e,"columns",d),o()(e,"data",[]),o()(e,"action","/action"),o()(e,"keystoreVisible",!1),o()(e,"keystorePass",""),o()(e,"repeatKeystorePass",""),o()(e,"keystorePassErr",""),o()(e,"repeatKeystorePassErr",""),o()(e,"keyStoreJsonStr",""),e},components:{Transactions:a.a},mounted:function(){this.initAddress()},computed:{transactions:function(){console.log("watch---addressinfo",this.addressInfo);var e=this,t=this.addressInfo,s=[];if(t.transactions){var r=t.transactions;s=r.map(function(t,s){var r=t.froms.map(function(e,t){if(e.address)return e.address}),o=t.tos.map(function(e,t){if(e.address)return e.address});return t.from=r.join(","),t.to=o.join(","),t.age=e.timeago().format(t.timeStamp),t})}return s},transaction_amount:function(){var e=this.addressInfo;return e.transactions&&e.transactions.length?e.transactions.length:0}},methods:{initAddress:function(e){var t=this;console.log(n.g,this.setAddress),console.log("--000000000"),this.loading=this.$loading();var s=Object(n.a)();if(e&&(s=e),s)return this.address=s,this.loading.close(),this.initAddressInfo(s),!1;this.$http.post("/node/man/pbgna.do",{address:s}).then(function(e){t.loaded=!0,t.getAddressErr="",t.loading.close(),console.log("addressinfo",e),"1"==e.retCode&&(e.address?(Object(n.g)(e.address),t.initAddressInfo(e.address)):Object(n.d)())}).catch(function(e){t.$message.error("网络请求错误"),t.getAddressErr="获取账户详情出错",t.loading.close(),console.log("err get account",e)})},addAccount:function(){this.addVisible=!0},setAddress:function(){var e=this,t=this.inputAddress.trim(),s=this.repeatpwd.trim(),r="";if(r=t.match(i)?"":"请输入6～20位密码",this.addressErr=r,!r){if(t!==s)return this.repeatErr="两次密码输入不一致",!1;this.repeatErr="",this.loading=this.$loading(),this.$http.post("/node/man/pbcna.do",{pwd:t}).then(function(t){e.loading.close(),"1"==t.retCode?(e.$message.success("账户创建成功"),e.inputAddress="",e.addVisible=!1,e.initAddress()):t.retMsg&&e.$message.error(t.retMsg+",账户创建失败")}).catch(function(t){e.loading.close(),e.$message.error("账户创建失败")})}},route:function(e){e&&this.$router.push({path:e})},initAddressInfo:function(e){var t=this,s="";s=this.$route.query.address?this.$route.query.address:Object(n.a)(),e&&(s=e),this.address=s,s&&this.$http.post("/node/adr/pbgad.do",{address:s}).then(function(e){1==e.retCode?e&&e.address?(t.addressInfo=e.address,t.addressMsg=""):(t.addressMsg="节点启动中...",setTimeout(function(){t.initAddressInfo()},5e3)):t.addressErr="没有获取到节点详情"}).catch(function(e){t.addressErr="没有获取到节点详情"})},getAddressInfoLoop:function(){},beforeUpload:function(e){var t=this;if(console.log("-----upload---file----",e),"function"==typeof FileReader){var s=new FileReader;s.onload=function(e){e.target.result&&(t.keyStoreJsonStr=e.target.result,t.keystoreVisible=!0)},s.onerror=function(e){t.$message.error("文件读取错误，请稍后重试")},s.readAsText(e)}else this.$message.warning("请使用chrome,firefox等现代浏览器");return!1},importKeystore:function(){var e=this,t=this.keyStoreJsonStr.trim(),s=this.keystorePass.trim(),r=this.repeatKeystorePass.trim(),o="";if(o=s.match(i)?"":"请输入6～20位密码",this.keystorePassErr=o,!o){if(s!==r)return this.repeatKeystorePassErr="两次密码输入不一致",!1;this.repeatKeystorePassErr="",this.loading=this.$loading(),this.$http.post("/node/man/pbsna.do",{pwd:s,keyStoreJsonStr:t}).then(function(t){e.loading.close(),"1"==t.retCode?(e.$message.success("账户创建成功"),e.keystorePass="",e.repeatKeystorePass="",e.keystoreVisible=!1,e.initAddress()):t.retMsg?e.$message.error(t.retMsg+",账户创建失败"):e.$message.error("账户创建失败,请稍后重试")}).catch(function(t){e.loading.close(),e.$message.error("账户创建失败")})}},closeDialog:function(){this.inputAddress="",this.repeatpwd="",this.keystorePass="",this.repeatKeystorePass=""}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"account"},[s("div",{staticClass:"account-inner"},[e.address&&!e.addressMsg?s("div",[s("h3",{staticClass:"title"},[e._v("账户详情")]),e._v(" "),s("el-button",{staticClass:"btn-block",staticStyle:{width:"20%","min-width":"100px"},attrs:{type:"primary"},on:{click:function(t){e.route("/import/export")}}},[e._v("\n        导出\n      ")]),e._v(" "),s("div",{staticStyle:{margin:"20px 0"}},[s("el-row",[s("el-col",{attrs:{span:4,xs:8}},[e._v("\n            账户余额：\n          ")]),e._v(" "),s("el-col",{attrs:{span:12}},[e._v("\n            "+e._s(e.addressInfo.balance)+"\n          ")])],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:4,xs:8}},[e._v("\n            交易数量：\n          ")]),e._v(" "),s("el-col",{attrs:{span:12}},[e._v("\n            "+e._s(e.transaction_amount)+"\n          ")])],1),e._v(" "),s("div",[s("div",{staticStyle:{margin:"20px 0",padding:"10px 0","border-bottom":"1px solid #eee"}},[e._v("交易：")]),e._v(" "),s("Transactions",{attrs:{address:e.address}})],1)],1)],1):e.addressMsg?s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.addressMsg,expression:"addressMsg"}],attrs:{"element-loading-text":"节点拼命启动中..."}},[s("div",{staticClass:"input-error",staticStyle:{padding:"50px 0"}},[e._v("\n        "+e._s(e.addressMsg)+"\n      ")])]):e.addressErr?s("div",[s("div",{staticClass:"input-error",staticStyle:{padding:"50px 0"}},[e._v("\n        "+e._s(e.addressErr)+"\n      ")])]):s("div",{directives:[{name:"show",rawName:"v-show",value:e.loaded,expression:"loaded"}]},[s("h3",[e._v("您目前好像还没有账户")]),e._v(" "),s("el-row",{attrs:{gutter:30}},[s("el-col",{attrs:{span:8,xs:24}},[s("el-card",[s("el-button",{staticClass:"new-account",attrs:{size:"mini",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.addAccount}},[e._v("创建")])],1)],1),e._v(" "),s("el-col",{attrs:{span:8,xs:24}},[s("el-card",[s("el-button",{staticClass:"import-account",attrs:{size:"mini",type:"primary",icon:"el-icon-edit-outline"}},[s("router-link",{attrs:{to:{name:"ImportKeystore"}}},[e._v("导入keystore")])],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:8,xs:24}},[s("el-card",[s("el-button",{staticClass:"import-account",attrs:{size:"mini",type:"primary",icon:"el-icon-edit-outline"},on:{click:function(t){e.route("/import/index")}}},[e._v("导入私钥")])],1)],1)],1)],1)]),e._v(" "),s("el-dialog",{attrs:{"modal-append-to-body":!1,title:"创建账户",visible:e.addVisible,center:""},on:{"update:visible":function(t){e.addVisible=t},close:e.closeDialog}},[s("div",[s("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请输入您的密码"},model:{value:e.inputAddress,callback:function(t){e.inputAddress=t},expression:"inputAddress"}}),e._v(" "),s("div",{staticClass:"input-error"},[e._v(e._s(e.addressErr))])],1),e._v(" "),s("div",[s("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请再次输入您的密码"},model:{value:e.repeatpwd,callback:function(t){e.repeatpwd=t},expression:"repeatpwd"}}),e._v(" "),s("div",{staticClass:"input-error"},[e._v(e._s(e.repeatErr))])],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"btn-block",attrs:{type:"primary"},on:{click:e.setAddress}},[e._v("确 定")])],1)]),e._v(" "),s("el-dialog",{attrs:{"modal-append-to-body":!1,title:"导入keystore",visible:e.keystoreVisible,center:""},on:{"update:visible":function(t){e.keystoreVisible=t},close:e.closeDialog}},[s("div",[s("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请输入您的密码"},model:{value:e.keystorePass,callback:function(t){e.keystorePass=t},expression:"keystorePass"}}),e._v(" "),s("div",{staticClass:"input-error"},[e._v(e._s(e.keystorePassErr))])],1),e._v(" "),s("div",[s("el-input",{attrs:{"auto-complete":"new-password",type:"password",placeholder:"请再次输入您的密码"},model:{value:e.repeatKeystorePass,callback:function(t){e.repeatKeystorePass=t},expression:"repeatKeystorePass"}}),e._v(" "),s("div",{staticClass:"input-error"},[e._v(e._s(e.repeatKeystorePassErr))])],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"btn-block",attrs:{type:"primary"},on:{click:e.importKeystore}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var p=s("VU/8")(l,c,!1,function(e){s("qFPy")},null,null);t.default=p.exports}});