webpackJsonp([5],{E4LH:function(t,s,n){"use strict";s.a=function(t){return["admin","editor"].indexOf(t.trim())>=0},s.b=function(t,s){t&&t.match(/^[1-9]\d*$/)||(t=15);s&&s.match(/^[1-9]\d*$/)||(s=10);return new RegExp("^(((0(\\.\\d{0,"+s+"})?))|([1-9]\\d{0,"+(t-1)+"}(\\.\\d{0,"+s+"})?))$")}},"bU/J":function(t,s,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.node-info {\n  border-bottom: 1px solid #eee;\n  line-height: 2em;\n}\n.node-info .el-col {\n    padding: 4px 0;\n}\n.node-info .node-item .node-item-left {\n    margin-right: 10px;\n}\n.node-info .node-item .node-item-right {\n    font-size: 14px;\n}\n.first-block-info {\n  padding: 10px 0 20px 0;\n}\n.node-info h3, .first-block-info h3 {\n  padding: 10px;\n  background: #f5f5f5;\n}\n.first-block .el-row {\n  margin: 15px 0;\n}\n",""])},lAHJ:function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=n("PJh5"),o=n.n(e),i=n("E4LH"),a=n("TIfe"),r={data:function(){return{firstLoading:!0,lockValue:"",lockPwdErr:"",addressMsg:"",lockpwd:"",lockVisible:!1,firstBlock:{},lockInputErr:"",node:{dpos:{},raft:{}},moment:o.a,accountInfo:{},loading:null}},mounted:function(){this.init()},computed:{address:function(){return this.node.address||""},balance:function(){var t=this.accountInfo;return t.balance?t.balance:"0"},tokens:function(){var t=this.accountInfo,s=[];return s&&"function"==typeof s.join&&(s=t.tokens),console.log("----tokens",s),s},lockedBalance:function(){var t="",s=this.accountInfo;return t=s.locked?s.locked:"0",t}},methods:{lockBlur:function(){var t=Object(i.b)(),s=this.lockValue.trim(),n=this.node.cwstotal;n&&s>n?this.lockInputErr="锁定数量大于账户余额":t.test(s)?this.lockInputErr="":this.lockInputErr="请正确输入大于0的数字"},goToAddress:function(){var t=this.address;if(!t)return!1;this.$router.push({name:"Account",query:{address:t}})},setAddress:function(){this.$router.push({name:"Account"})},initNode:function(){var t=this;this.loading=this.$loading(),this.$http.post("/node/man/pbgni.do").then(function(s){if(t.loading.close(),t.initFirst(),s.serverTime)if(t.node=s,t.node&&t.node.address){var n=t.node.address;Object(a.g)(n),t.initAccount(n)}else Object(a.d)();else t.node={}}).catch(function(s){t.initFirst(),t.loading.close(),console.log(s)})},initAccount:function(t){var s=this;this.$http.post("/node/adr/pbgad.do",{address:t}).then(function(t){1==t.retCode?t.address?(s.accountInfo=t.address,s.addressMsg=""):(s.addressMsg="节点启动中",setTimeout(function(){s.initAccount()},5e3)):s.addressMsg="未能获取到账户详情,请稍后重试"}).catch(function(t){})},init:function(){this.initNode()},initFirst:function(){var t=this,s=this;this.firstLoading=!0,this.$http({url:"/node/blk/pbggb.do",method:"post",data:{}}).then(function(n){s.firstLoading=!1,console.log("res----",n),"1"==n.retCode&&n.block&&n.block.header&&(t.firstBlock=n.block.header,t.firstBlock.age=t.timeago().format(t.firstBlock.timestamp))}).catch(function(t){s.firstLoading=!1,console.log("----err-----",t)})},copy:function(){var t=this.firstBlock.hash||"",s=this;t&&this.$copyText(t).then(function(t){s.$message.success("复制成功")},function(t){s.$message.error("复制失败，请稍后重试")})},lock:function(){var t=this,s=this.lockpwd.trim();if(!s.match(/^.{4,20}$/))return this.lockPwdErr="请输入4-20位密码",!1;this.lockPwdErr="";var n=this.lockValue.trim();this.loading=this.$loading(),this.$http.post("/node/man/pbslc.do",{pwd:s,amount:n}).then(function(s){t.loading.close(),"1"==s.retCode?(t.$message.success("锁定成功"),t.lockVisible=!1,t.lockValue="",t.init()):s.retMsg?t.$message.error(s.retMsg+",锁定失败，请稍后重试"):t.$message.error("锁定失败，请稍后重试")}).catch(function(s){t.loading.close(),t.$message.error("锁定失败，请稍后重试"),t.lockVisible=!1,t.lockpwd=""})},openLockDialog:function(){this.lockInputErr||(this.lockVisible=!0)},closeDialog:function(){this.lockpwd=""}}},l={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"summary-index"},[t.node.serverTime?n("div",{staticClass:"node-info"},[n("h3",{staticStyle:{margin:"10px 0 20px 0"}},[t._v("节点摘要信息")]),t._v(" "),n("div",{staticStyle:{"min-height":"300px","padding-bottom":"20px"}},[n("el-row",[n("el-col",{attrs:{span:12,xs:24}},[n("h4",[t._v("DPOS")]),t._v(" "),n("table",{staticClass:"border-table"},t._l(t.node.dpos,function(s,e){return n("tr",{key:e},[n("td",[t._v(t._s(e))]),t._v(" "),"startUpTime"==e?n("td",[n("timeago",{attrs:{since:s}})],1):n("td",[t._v(t._s(s))])])}))]),t._v(" "),n("el-col",{attrs:{span:12,xs:24}},[n("h4",[t._v("RAFT")]),t._v(" "),n("table",{staticClass:"border-table"},t._l(t.node.raft,function(s,e){return n("tr",{key:e},[n("td",[t._v(t._s(e))]),t._v(" "),"startUpTime"==e?n("td",[n("timeago",{attrs:{since:s}})],1):n("td",[t._v(t._s(s))])])}))])],1),t._v(" "),void 0!==t.accountInfo.balance?n("div",{staticStyle:{"margin-top":"40px"}},[n("el-row",[n("el-col",{attrs:{span:4,xs:8}},[t._v("锁定：")]),t._v(" "),n("el-col",{attrs:{span:10,xs:16}},[n("el-input",{attrs:{type:"number",placeholder:"请输入"},on:{input:t.lockBlur},model:{value:t.lockValue,callback:function(s){t.lockValue=s},expression:"lockValue"}},[n("template",{slot:"append"},[n("el-button",{attrs:{type:"primary"},on:{click:t.openLockDialog}},[t._v("确定")])],1)],2),t._v(" "),n("div",{staticClass:"input-error"},[t._v(t._s(t.lockInputErr))])],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:4,xs:8}},[t._v("账户余额：")]),t._v(" "),n("el-col",{attrs:{span:10,xs:16}},[t._v("\n            "+t._s(t.balance)+"\n          ")])],1),t._v(" "),n("div",[t._v("token: ")]),t._v(" "),t._l(t.tokens,function(s){return n("div",{key:s.token},[n("el-row",[n("el-col",{attrs:{span:2,xs:8}},[t._v(t._s("name")+":")]),t._v(" "),n("el-col",{attrs:{span:4,xs:16}},[t._v("\n              "+t._s(s.token)+"\n            ")]),t._v(" "),n("el-col",{attrs:{span:2,xs:8}},[t._v(t._s("可用")+":")]),t._v(" "),n("el-col",{attrs:{span:4,xs:16}},[t._v("\n              "+t._s(s.balance)+"\n            ")]),t._v(" "),n("el-col",{attrs:{span:2,xs:8}},[t._v(t._s("锁定: "))]),t._v(" "),n("el-col",{attrs:{span:8,xs:16}},[t._v("\n              "+t._s(s.locked)+"\n            ")])],1)],1)})],2):t._e(),t._v(" "),t.addressMsg?n("div",[n("div",{class:{"input-error":t.addressMsg.match("详情")}},[t._v("\n          "+t._s(t.addressMsg)+"\n        ")])]):t._e(),t._v(" "),t._l(t.node,function(s,e){return"address"!=e&&"cwstotal"!=e?n("div",{key:e+0},[s.name?n("el-row"):n("el-row",[n("el-col",{attrs:{span:4,xs:8}},[n("div",[t._v("\n              "+t._s(e)+":\n            ")])]),t._v(" "),n("el-col",{attrs:{span:20,xs:16}},[n("div","serverTime"==e?[t._v("\n              "+t._s(t.moment(+s).format("YYYY-MM-DD HH:mm:ss"))+"\n            ")]:[t._v("\n              "+t._s(s)+"\n            ")])])],1)],1):t._e()}),t._v(" "),n("div",[n("el-row",[n("el-col",{attrs:{span:4,xs:8}},[t._v("\n            address:\n          ")]),t._v(" "),n("el-col",{attrs:{span:20,xs:16}},[t.address?n("div",[n("a",{staticClass:"link",attrs:{href:"javascript:;"},on:{click:t.goToAddress}},[t._v("\n                "+t._s(t.address)+"\n              ")])]):n("div",[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.setAddress}},[t._v("去设置")])],1)])],1)],1)],2)]):n("div",{staticClass:"node-info"},[n("h3",{staticStyle:{margin:"10px 0 20px 0"}},[t._v("节点摘要信息")]),t._v(" "),n("p",{staticClass:"input-error",staticStyle:{padding:"10% 0"}},[t._v("没有获取到节点信息")])]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.firstLoading,expression:"firstLoading"}],staticClass:"first-block-info"},[n("h3",[t._v("创世块信息")]),t._v(" "),t.firstBlock.blockHash?n("div",{staticClass:"first-block"},[n("el-row",[n("el-col",{attrs:{span:4}},[t._v("Hash:   ")]),t._v(" "),n("el-col",{attrs:{span:20}},[n("a",{staticClass:"ellipsis block",attrs:{href:"javascript:;",title:"复制Hash"},on:{click:t.copy}},[t._v(t._s(t.firstBlock.blockHash))])])],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:4}},[t._v("Timestamp:   ")]),t._v(" "),n("el-col",{attrs:{span:20}},[n("a",{staticClass:"ellipsis block",attrs:{href:"javascript:;",title:"复制Hash"},on:{click:t.copy}},[t._v(t._s(t.firstBlock.age))])])],1)],1):n("div",{staticClass:"input-error",staticStyle:{padding:"5% 0"}},[t._v("\n      没有获取到创世块的信息\n    ")])]),t._v(" "),n("el-dialog",{attrs:{"modal-append-to-body":!1,title:"锁定",visible:t.lockVisible,center:""},on:{"update:visible":function(s){t.lockVisible=s},close:t.closeDialog}},[n("div",[n("el-input",{attrs:{clearable:"","auto-complete":"new-password",type:"password",placeholder:"请输入您的密码"},model:{value:t.lockpwd,callback:function(s){t.lockpwd=s},expression:"lockpwd"}}),t._v(" "),n("div",{staticClass:"input-error"},[t._v(t._s(t.lockPwdErr))])],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"btn-block",attrs:{type:"primary"},on:{click:t.lock}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var c=n("VU/8")(r,l,!1,function(t){n("ukp0")},null,null);s.default=c.exports},ukp0:function(t,s,n){var e=n("bU/J");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);n("rjj0")("2b1739e1",e,!0)}});