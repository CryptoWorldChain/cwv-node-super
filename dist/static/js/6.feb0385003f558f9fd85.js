webpackJsonp([6],{"6nQ0":function(t,e,s){var o=s("qZW6");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("2e6246ea",o,!0)},E4LH:function(t,e,s){"use strict";e.a=function(t){return["admin","editor"].indexOf(t.trim())>=0},e.b=function(t,e){t&&t.match(/^[1-9]\d*$/)||(t=15);e&&e.match(/^[1-9]\d*$/)||(e=10);return new RegExp("^(((0(\\.\\d{0,"+e+"})?))|([1-9]\\d{0,"+(t-1)+"}(\\.\\d{0,"+e+"})?))$")}},lAHJ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("PJh5"),n=s.n(o),i=s("E4LH"),a=s("TIfe"),l={data:function(){return{lockValue:"",lockPwdErr:"",lockpwd:"",lockVisible:!1,firstBlock:{},node:{dpos:{},raft:{}},moment:n.a,accountInfo:{},loading:null}},mounted:function(){this.init()},computed:{address:function(){return this.node.address||""},balance:function(){var t=this.accountInfo;return t.balance?t.balance:"0"}},methods:{goToAddress:function(){var t=this.address;if(!t)return!1;this.$router.push({name:"Account",query:{address:t}})},initNode:function(){var t=this;this.$http.post("/node/man/pbgni.do").then(function(e){if(e.serverTime)if(t.node=e,t.node&&t.node.address){var s=t.node.address;Object(a.f)(s),t.initAccount(s)}else Object(a.d)();else t.node={}}).catch(function(t){console.log(t)})},initAccount:function(t){var e=this;this.loading=this.$loading(),this.$http.post("/block/adr/pbgad.do",{address:t}).then(function(t){e.loading.close(),1==t.retCode&&t.address?e.accountInfo=t.address:e.$message.error("获取账户详情错误")}).catch(function(t){e.loading.close()})},init:function(){var t=this;this.initNode(),this.$loading(),this.$http({url:"/block/blk/pbggb.do",method:"post",data:{}}).then(function(e){t.$loading().close(),console.log("res----",e),"1"==e.retCode&&e.block&&e.block.header&&(t.firstBlock=e.block.header,t.firstBlock.age=t.timeago().format(t.firstBlock.timestamp))}).catch(function(e){t.$loading().close(),console.log("----err-----",e)})},copy:function(){var t=this.firstBlock.hash||"",e=this;t&&this.$copyText(t).then(function(t){e.$message.success("复制成功")},function(t){e.$message.error("复制失败，请稍后重试")})},lock:function(){var t=this,e=this.lockpwd.trim();if(!e.match(/^.{4,20}$/))return this.lockPwdErr="请输入4-20位密码",!1;this.lockPwdErr="";var s=this.lockValue.trim();this.loading=this.$loading(),this.$http.post("/node/man/pbslc.do",{pwd:e,amount:s}).then(function(e){t.loading.close(),"1"==e.retCode?(t.$message.success("锁定成功"),t.lockVisible=!1,t.lockValue="",t.init()):e.retMsg?t.$message.error(e.retMsg+",锁定失败，请稍后重试"):t.$message.error("锁定失败，请稍后重试")}).catch(function(e){t.loading.close(),t.$message.error("锁定失败，请稍后重试"),t.lockVisible=!1,t.lockpwd=""})},openLockDialog:function(){var t=Object(i.b)(),e=this.lockValue.trim(),s=this.accountInfo.balance;s&&e>s?this.$message.warning("锁定数量大于账户余额"):t.test(e)?this.lockVisible=!0:this.$message.warning("请输入正确的数字")},closeDialog:function(){this.lockpwd=""}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"summary-index"},[t.node.serverTime?s("div",{staticClass:"node-info"},[s("h3",{staticStyle:{margin:"10px 0 20px 0"}},[t._v("节点摘要信息")]),t._v(" "),s("div",{staticStyle:{"min-height":"300px","padding-bottom":"20px"}},[s("el-row",[s("el-col",{attrs:{span:12,xs:24}},[s("h4",[t._v("DPOS")]),t._v(" "),s("table",{staticClass:"border-table"},t._l(t.node.dpos,function(e,o){return s("tr",{key:o},[s("td",[t._v(t._s(o))]),t._v(" "),"startUpTime"==o?s("td",[s("timeago",{attrs:{since:e}})],1):s("td",[t._v(t._s(e))])])}))]),t._v(" "),s("el-col",{attrs:{span:12,xs:24}},[s("h4",[t._v("RAFT")]),t._v(" "),s("table",{staticClass:"border-table"},t._l(t.node.raft,function(e,o){return s("tr",{key:o},[s("td",[t._v(t._s(o))]),t._v(" "),"startUpTime"==o?s("td",[s("timeago",{attrs:{since:e}})],1):s("td",[t._v(t._s(e))])])}))])],1),t._v(" "),void 0!==t.accountInfo.balance?s("div",{staticStyle:{"margin-top":"40px"}},[s("el-row",[s("el-col",{attrs:{span:4,xs:8}},[t._v("锁定：")]),t._v(" "),s("el-col",{attrs:{span:10,xs:16}},[s("el-input",{attrs:{type:"number",placeholder:"请输入"},model:{value:t.lockValue,callback:function(e){t.lockValue=e},expression:"lockValue"}},[s("template",{slot:"append"},[s("el-button",{attrs:{type:"primary"},on:{click:t.openLockDialog}},[t._v("确定")])],1)],2)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:4,xs:8}},[t._v("账户余额：")]),t._v(" "),s("el-col",{attrs:{span:10,xs:16}},[t._v("\n            "+t._s(t.balance)+"\n          ")])],1)],1):t._e(),t._v(" "),t._l(t.node,function(e,o){return"address"!=o?s("div",{key:o+0},[e.name?s("el-row"):s("el-row",[s("el-col",{attrs:{span:4,xs:8}},[s("div",[t._v("\n              "+t._s(o)+":\n            ")])]),t._v(" "),s("el-col",{attrs:{span:20,xs:16}},[s("div","serverTime"==o?[t._v("\n              "+t._s(t.moment(+e).format("YYYY-MM-DD HH:mm:ss"))+"\n            ")]:[t._v("\n              "+t._s(e)+"\n            ")])])],1)],1):t._e()}),t._v(" "),s("div",[s("el-row",[s("el-col",{attrs:{span:4,xs:8}},[t._v("\n            address:\n          ")]),t._v(" "),s("el-col",{attrs:{span:20,xs:16}},[t.address?s("div",[s("a",{staticClass:"link",attrs:{href:"javascript:;"},on:{click:t.goToAddress}},[t._v("\n                "+t._s(t.address)+"\n              ")])]):s("div",[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.goToAddress}},[t._v("去设置")])],1)])],1)],1)],2)]):s("div",{staticClass:"node-info"},[s("h3",{staticStyle:{margin:"10px 0 20px 0"}},[t._v("节点摘要信息")]),t._v(" "),s("p",{staticClass:"input-error",staticStyle:{padding:"10% 0"}},[t._v("没有获取到节点信息")])]),t._v(" "),s("div",{staticClass:"first-block-info"},[s("h3",[t._v("创世块信息")]),t._v(" "),t.firstBlock.blockHash?s("div",{staticClass:"first-block"},[s("el-row",[s("el-col",{attrs:{span:4}},[t._v("Hash:   ")]),t._v(" "),s("el-col",{attrs:{span:20}},[s("a",{staticClass:"ellipsis block",attrs:{href:"javascript:;",title:"复制Hash"},on:{click:t.copy}},[t._v(t._s(t.firstBlock.blockHash))])])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:4}},[t._v("Timestamp:   ")]),t._v(" "),s("el-col",{attrs:{span:20}},[s("a",{staticClass:"ellipsis block",attrs:{href:"javascript:;",title:"复制Hash"},on:{click:t.copy}},[t._v(t._s(t.firstBlock.age))])])],1)],1):s("div",{staticClass:"input-error",staticStyle:{padding:"5% 0"}},[t._v("\n      没有获取到创世块的信息\n    ")])]),t._v(" "),s("el-dialog",{attrs:{"modal-append-to-body":!1,title:"锁定",visible:t.lockVisible,center:""},on:{"update:visible":function(e){t.lockVisible=e},close:t.closeDialog}},[s("div",[s("el-input",{attrs:{clearable:"","auto-complete":"new-password",type:"password",placeholder:"请输入您的密码"},model:{value:t.lockpwd,callback:function(e){t.lockpwd=e},expression:"lockpwd"}}),t._v(" "),s("div",{staticClass:"input-error"},[t._v(t._s(t.lockPwdErr))])],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"btn-block",attrs:{type:"primary"},on:{click:t.lock}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var c=s("VU/8")(l,r,!1,function(t){s("6nQ0")},null,null);e.default=c.exports},qZW6:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,"\n.node-info {\n  border-bottom: 1px solid #eee;\n  line-height: 2em;\n}\n.node-info .el-col {\n    padding: 4px 0;\n}\n.node-info .node-item .node-item-left {\n    margin-right: 10px;\n}\n.node-info .node-item .node-item-right {\n    font-size: 14px;\n}\n.first-block-info {\n  padding: 10px 0 20px 0;\n}\n.node-info h3, .first-block-info h3 {\n  padding: 10px;\n  background: #f5f5f5;\n}\n.first-block .el-row {\n  margin: 15px 0;\n}\n",""])}});